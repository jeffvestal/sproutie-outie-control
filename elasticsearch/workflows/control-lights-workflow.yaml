# Elastic Workflow: Control Lights via MCP
# This workflow calls the MCP server to control grow lights

id: workflow-control-lights
name: Control Sproutie Outie Lights
description: Controls grow lights in the Sproutie Outie tent via MCP server

inputs:
  shelf:
    type: string
    required: true
    description: "Shelf location: 'top' or 'bottom'"
  state:
    type: boolean
    required: true
    description: "True to turn on, False to turn off"

steps:
  - name: call_mcp_set_light
    type: http
    with:
      url: "http://mcp-server:8001/mcp/tools/set_light_state"
      method: POST
      headers:
        Content-Type: application/json
      body:
        shelf: "{{ inputs.shelf }}"
        state: "{{ inputs.state }}"
    on_failure:
      - type: respond
        with:
          error: "Failed to control lights. Check MCP server connection."

  - name: respond
    type: respond
    with:
      result: "{{ steps.call_mcp_set_light.body }}"


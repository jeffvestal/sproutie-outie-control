# Sproutie OS v2.1 - Workbench (Operations)
# Material Design 3 | Stack-in-card containers | 24px border-radius

title: Workbench
path: workbench
type: panel
cards:
  - type: vertical-stack
    cards:
      # ═══════════════════════════════════════════════════════════════════════
      # SECTION 1: HEADER - Navigation/Mode Selection
      # ═══════════════════════════════════════════════════════════════════════
      - type: custom:stack-in-card
        card_mod:
          style: |
            ha-card {
              background: rgba(30, 30, 30, 0.6) !important;
              border-radius: 24px !important;
              border: none !important;
              padding: 16px !important;
            }
        cards:
          - type: horizontal-stack
            cards:
              - type: custom:mushroom-template-card
                primary: Workbench
                secondary: "{{ states('input_select.op_mode') }} Mode"
                icon: mdi:sprout
                icon_color: green
                card_mod:
                  style: |
                    ha-card {
                      background: transparent !important;
                      border: none !important;
                      box-shadow: none !important;
                    }
                    .primary {
                      font-size: 24px !important;
                      font-weight: 700 !important;
                    }
              - type: custom:mushroom-chips-card
                alignment: end
                chips:
                  - type: template
                    icon: mdi:seed
                    icon_color: "{% if is_state('input_select.op_mode', 'Seeding') %}green{% else %}grey{% endif %}"
                    content: Seeding
                    tap_action:
                      action: call-service
                      service: input_select.select_option
                      service_data:
                        entity_id: input_select.op_mode
                        option: Seeding
                  - type: template
                    icon: mdi:watering-can
                    icon_color: "{% if is_state('input_select.op_mode', 'Care') %}blue{% else %}grey{% endif %}"
                    content: Care
                    tap_action:
                      action: call-service
                      service: input_select.select_option
                      service_data:
                        entity_id: input_select.op_mode
                        option: Care
                  - type: template
                    icon: mdi:basket
                    icon_color: "{% if is_state('input_select.op_mode', 'Harvest') %}orange{% else %}grey{% endif %}"
                    content: Harvest
                    tap_action:
                      action: call-service
                      service: input_select.select_option
                      service_data:
                        entity_id: input_select.op_mode
                        option: Harvest
                card_mod:
                  style: |
                    ha-card {
                      background: transparent !important;
                      border: none !important;
                      box-shadow: none !important;
                    }

      # ═══════════════════════════════════════════════════════════════════════
      # SECTION 2: ACTIVE BATCHES (Static list - shows planted slots)
      # ═══════════════════════════════════════════════════════════════════════
      - type: custom:stack-in-card
        card_mod:
          style: |
            ha-card {
              background: rgba(30, 30, 30, 0.6) !important;
              border-radius: 24px !important;
              border: none !important;
              padding: 16px !important;
            }
        cards:
          - type: custom:mushroom-template-card
            primary: Active Batches
            icon: mdi:tray-full
            icon_color: cyan
            card_mod:
              style: |
                ha-card {
                  background: transparent !important;
                  border: none !important;
                  box-shadow: none !important;
                  padding: 0 0 8px 0 !important;
                }
                .primary {
                  font-size: 16px !important;
                  font-weight: 600 !important;
                  text-transform: uppercase !important;
                  letter-spacing: 1px !important;
                }
          - type: custom:auto-entities
            show_empty: false
            card:
              type: grid
              columns: 2
              square: false
            card_param: cards
            filter:
              include:
                - entity_id: input_text.slot_*_data
                  state: "!= Empty"
                  not:
                    state: ""
                  not:
                    state: "unknown"
                  not:
                    state: "unavailable"
                  options:
                    type: custom:mushroom-entity-card
                    icon: mdi:sprout
                    icon_color: green
                    tap_action:
                      action: more-info
                    card_mod:
                      style: |
                        ha-card {
                          background: rgba(46, 204, 113, 0.2) !important;
                          border-radius: 12px !important;
                        }

      # ═══════════════════════════════════════════════════════════════════════
      # SECTION 3: PLANTING GRIDS (Zone A / Zone B)
      # ═══════════════════════════════════════════════════════════════════════
      - type: horizontal-stack
        cards:
          # Zone A (Top Shelf)
          - type: custom:stack-in-card
            card_mod:
              style: |
                ha-card {
                  background: rgba(30, 30, 30, 0.6) !important;
                  border-radius: 24px !important;
                  border: none !important;
                  padding: 16px !important;
                }
            cards:
              - type: custom:mushroom-template-card
                primary: Zone A
                secondary: Top Shelf
                icon: mdi:arrow-up-box
                icon_color: cyan
                card_mod:
                  style: |
                    ha-card {
                      background: transparent !important;
                      border: none !important;
                      box-shadow: none !important;
                      padding: 0 0 8px 0 !important;
                    }
                    .primary {
                      font-size: 14px !important;
                      font-weight: 600 !important;
                      text-transform: uppercase !important;
                    }
              - type: custom:layout-card
                layout_type: grid
                layout:
                  grid-template-columns: repeat(4, 1fr)
                  gap: 8px
                cards:
                  - type: custom:mushroom-template-card
                    entity: input_text.slot_a1_data
                    primary: A1
                    icon: "{% if states('input_text.slot_a1_data') in ['', 'Empty', 'unknown', 'unavailable'] %}mdi:tray{% else %}mdi:sprout{% endif %}"
                    icon_color: "{% if states('input_text.slot_a1_data') in ['', 'Empty', 'unknown', 'unavailable'] %}grey{% else %}green{% endif %}"
                    tap_action:
                      action: more-info
                    card_mod:
                      style: |
                        ha-card {
                          background: {% if states('input_text.slot_a1_data') in ['', 'Empty', 'unknown', 'unavailable'] %}rgba(50, 50, 50, 0.4){% else %}rgba(46, 204, 113, 0.2){% endif %} !important;
                          border-radius: 12px !important;
                        }
                  - type: custom:mushroom-template-card
                    entity: input_text.slot_a2_data
                    primary: A2
                    icon: "{% if states('input_text.slot_a2_data') in ['', 'Empty', 'unknown', 'unavailable'] %}mdi:tray{% else %}mdi:sprout{% endif %}"
                    icon_color: "{% if states('input_text.slot_a2_data') in ['', 'Empty', 'unknown', 'unavailable'] %}grey{% else %}green{% endif %}"
                    tap_action:
                      action: more-info
                    card_mod:
                      style: |
                        ha-card {
                          background: {% if states('input_text.slot_a2_data') in ['', 'Empty', 'unknown', 'unavailable'] %}rgba(50, 50, 50, 0.4){% else %}rgba(46, 204, 113, 0.2){% endif %} !important;
                          border-radius: 12px !important;
                        }
                  - type: custom:mushroom-template-card
                    entity: input_text.slot_a3_data
                    primary: A3
                    icon: "{% if states('input_text.slot_a3_data') in ['', 'Empty', 'unknown', 'unavailable'] %}mdi:tray{% else %}mdi:sprout{% endif %}"
                    icon_color: "{% if states('input_text.slot_a3_data') in ['', 'Empty', 'unknown', 'unavailable'] %}grey{% else %}green{% endif %}"
                    tap_action:
                      action: more-info
                    card_mod:
                      style: |
                        ha-card {
                          background: {% if states('input_text.slot_a3_data') in ['', 'Empty', 'unknown', 'unavailable'] %}rgba(50, 50, 50, 0.4){% else %}rgba(46, 204, 113, 0.2){% endif %} !important;
                          border-radius: 12px !important;
                        }
                  - type: custom:mushroom-template-card
                    entity: input_text.slot_a4_data
                    primary: A4
                    icon: "{% if states('input_text.slot_a4_data') in ['', 'Empty', 'unknown', 'unavailable'] %}mdi:tray{% else %}mdi:sprout{% endif %}"
                    icon_color: "{% if states('input_text.slot_a4_data') in ['', 'Empty', 'unknown', 'unavailable'] %}grey{% else %}green{% endif %}"
                    tap_action:
                      action: more-info
                    card_mod:
                      style: |
                        ha-card {
                          background: {% if states('input_text.slot_a4_data') in ['', 'Empty', 'unknown', 'unavailable'] %}rgba(50, 50, 50, 0.4){% else %}rgba(46, 204, 113, 0.2){% endif %} !important;
                          border-radius: 12px !important;
                        }
                  - type: custom:mushroom-template-card
                    entity: input_text.slot_a5_data
                    primary: A5
                    icon: "{% if states('input_text.slot_a5_data') in ['', 'Empty', 'unknown', 'unavailable'] %}mdi:tray{% else %}mdi:sprout{% endif %}"
                    icon_color: "{% if states('input_text.slot_a5_data') in ['', 'Empty', 'unknown', 'unavailable'] %}grey{% else %}green{% endif %}"
                    tap_action:
                      action: more-info
                    card_mod:
                      style: |
                        ha-card {
                          background: {% if states('input_text.slot_a5_data') in ['', 'Empty', 'unknown', 'unavailable'] %}rgba(50, 50, 50, 0.4){% else %}rgba(46, 204, 113, 0.2){% endif %} !important;
                          border-radius: 12px !important;
                        }
                  - type: custom:mushroom-template-card
                    entity: input_text.slot_a6_data
                    primary: A6
                    icon: "{% if states('input_text.slot_a6_data') in ['', 'Empty', 'unknown', 'unavailable'] %}mdi:tray{% else %}mdi:sprout{% endif %}"
                    icon_color: "{% if states('input_text.slot_a6_data') in ['', 'Empty', 'unknown', 'unavailable'] %}grey{% else %}green{% endif %}"
                    tap_action:
                      action: more-info
                    card_mod:
                      style: |
                        ha-card {
                          background: {% if states('input_text.slot_a6_data') in ['', 'Empty', 'unknown', 'unavailable'] %}rgba(50, 50, 50, 0.4){% else %}rgba(46, 204, 113, 0.2){% endif %} !important;
                          border-radius: 12px !important;
                        }
                  - type: custom:mushroom-template-card
                    entity: input_text.slot_a7_data
                    primary: A7
                    icon: "{% if states('input_text.slot_a7_data') in ['', 'Empty', 'unknown', 'unavailable'] %}mdi:tray{% else %}mdi:sprout{% endif %}"
                    icon_color: "{% if states('input_text.slot_a7_data') in ['', 'Empty', 'unknown', 'unavailable'] %}grey{% else %}green{% endif %}"
                    tap_action:
                      action: more-info
                    card_mod:
                      style: |
                        ha-card {
                          background: {% if states('input_text.slot_a7_data') in ['', 'Empty', 'unknown', 'unavailable'] %}rgba(50, 50, 50, 0.4){% else %}rgba(46, 204, 113, 0.2){% endif %} !important;
                          border-radius: 12px !important;
                        }
                  - type: custom:mushroom-template-card
                    entity: input_text.slot_a8_data
                    primary: A8
                    icon: "{% if states('input_text.slot_a8_data') in ['', 'Empty', 'unknown', 'unavailable'] %}mdi:tray{% else %}mdi:sprout{% endif %}"
                    icon_color: "{% if states('input_text.slot_a8_data') in ['', 'Empty', 'unknown', 'unavailable'] %}grey{% else %}green{% endif %}"
                    tap_action:
                      action: more-info
                    card_mod:
                      style: |
                        ha-card {
                          background: {% if states('input_text.slot_a8_data') in ['', 'Empty', 'unknown', 'unavailable'] %}rgba(50, 50, 50, 0.4){% else %}rgba(46, 204, 113, 0.2){% endif %} !important;
                          border-radius: 12px !important;
                        }

          # Zone B (Bottom Shelf)
          - type: custom:stack-in-card
            card_mod:
              style: |
                ha-card {
                  background: rgba(30, 30, 30, 0.6) !important;
                  border-radius: 24px !important;
                  border: none !important;
                  padding: 16px !important;
                }
            cards:
              - type: custom:mushroom-template-card
                primary: Zone B
                secondary: Bottom Shelf
                icon: mdi:arrow-down-box
                icon_color: orange
                card_mod:
                  style: |
                    ha-card {
                      background: transparent !important;
                      border: none !important;
                      box-shadow: none !important;
                      padding: 0 0 8px 0 !important;
                    }
                    .primary {
                      font-size: 14px !important;
                      font-weight: 600 !important;
                      text-transform: uppercase !important;
                    }
              - type: custom:layout-card
                layout_type: grid
                layout:
                  grid-template-columns: repeat(4, 1fr)
                  gap: 8px
                cards:
                  - type: custom:mushroom-template-card
                    entity: input_text.slot_b1_data
                    primary: B1
                    icon: "{% if states('input_text.slot_b1_data') in ['', 'Empty', 'unknown', 'unavailable'] %}mdi:tray{% else %}mdi:sprout{% endif %}"
                    icon_color: "{% if states('input_text.slot_b1_data') in ['', 'Empty', 'unknown', 'unavailable'] %}grey{% else %}green{% endif %}"
                    tap_action:
                      action: more-info
                    card_mod:
                      style: |
                        ha-card {
                          background: {% if states('input_text.slot_b1_data') in ['', 'Empty', 'unknown', 'unavailable'] %}rgba(50, 50, 50, 0.4){% else %}rgba(46, 204, 113, 0.2){% endif %} !important;
                          border-radius: 12px !important;
                        }
                  - type: custom:mushroom-template-card
                    entity: input_text.slot_b2_data
                    primary: B2
                    icon: "{% if states('input_text.slot_b2_data') in ['', 'Empty', 'unknown', 'unavailable'] %}mdi:tray{% else %}mdi:sprout{% endif %}"
                    icon_color: "{% if states('input_text.slot_b2_data') in ['', 'Empty', 'unknown', 'unavailable'] %}grey{% else %}green{% endif %}"
                    tap_action:
                      action: more-info
                    card_mod:
                      style: |
                        ha-card {
                          background: {% if states('input_text.slot_b2_data') in ['', 'Empty', 'unknown', 'unavailable'] %}rgba(50, 50, 50, 0.4){% else %}rgba(46, 204, 113, 0.2){% endif %} !important;
                          border-radius: 12px !important;
                        }
                  - type: custom:mushroom-template-card
                    entity: input_text.slot_b3_data
                    primary: B3
                    icon: "{% if states('input_text.slot_b3_data') in ['', 'Empty', 'unknown', 'unavailable'] %}mdi:tray{% else %}mdi:sprout{% endif %}"
                    icon_color: "{% if states('input_text.slot_b3_data') in ['', 'Empty', 'unknown', 'unavailable'] %}grey{% else %}green{% endif %}"
                    tap_action:
                      action: more-info
                    card_mod:
                      style: |
                        ha-card {
                          background: {% if states('input_text.slot_b3_data') in ['', 'Empty', 'unknown', 'unavailable'] %}rgba(50, 50, 50, 0.4){% else %}rgba(46, 204, 113, 0.2){% endif %} !important;
                          border-radius: 12px !important;
                        }
                  - type: custom:mushroom-template-card
                    entity: input_text.slot_b4_data
                    primary: B4
                    icon: "{% if states('input_text.slot_b4_data') in ['', 'Empty', 'unknown', 'unavailable'] %}mdi:tray{% else %}mdi:sprout{% endif %}"
                    icon_color: "{% if states('input_text.slot_b4_data') in ['', 'Empty', 'unknown', 'unavailable'] %}grey{% else %}green{% endif %}"
                    tap_action:
                      action: more-info
                    card_mod:
                      style: |
                        ha-card {
                          background: {% if states('input_text.slot_b4_data') in ['', 'Empty', 'unknown', 'unavailable'] %}rgba(50, 50, 50, 0.4){% else %}rgba(46, 204, 113, 0.2){% endif %} !important;
                          border-radius: 12px !important;
                        }
                  - type: custom:mushroom-template-card
                    entity: input_text.slot_b5_data
                    primary: B5
                    icon: "{% if states('input_text.slot_b5_data') in ['', 'Empty', 'unknown', 'unavailable'] %}mdi:tray{% else %}mdi:sprout{% endif %}"
                    icon_color: "{% if states('input_text.slot_b5_data') in ['', 'Empty', 'unknown', 'unavailable'] %}grey{% else %}green{% endif %}"
                    tap_action:
                      action: more-info
                    card_mod:
                      style: |
                        ha-card {
                          background: {% if states('input_text.slot_b5_data') in ['', 'Empty', 'unknown', 'unavailable'] %}rgba(50, 50, 50, 0.4){% else %}rgba(46, 204, 113, 0.2){% endif %} !important;
                          border-radius: 12px !important;
                        }
                  - type: custom:mushroom-template-card
                    entity: input_text.slot_b6_data
                    primary: B6
                    icon: "{% if states('input_text.slot_b6_data') in ['', 'Empty', 'unknown', 'unavailable'] %}mdi:tray{% else %}mdi:sprout{% endif %}"
                    icon_color: "{% if states('input_text.slot_b6_data') in ['', 'Empty', 'unknown', 'unavailable'] %}grey{% else %}green{% endif %}"
                    tap_action:
                      action: more-info
                    card_mod:
                      style: |
                        ha-card {
                          background: {% if states('input_text.slot_b6_data') in ['', 'Empty', 'unknown', 'unavailable'] %}rgba(50, 50, 50, 0.4){% else %}rgba(46, 204, 113, 0.2){% endif %} !important;
                          border-radius: 12px !important;
                        }
                  - type: custom:mushroom-template-card
                    entity: input_text.slot_b7_data
                    primary: B7
                    icon: "{% if states('input_text.slot_b7_data') in ['', 'Empty', 'unknown', 'unavailable'] %}mdi:tray{% else %}mdi:sprout{% endif %}"
                    icon_color: "{% if states('input_text.slot_b7_data') in ['', 'Empty', 'unknown', 'unavailable'] %}grey{% else %}green{% endif %}"
                    tap_action:
                      action: more-info
                    card_mod:
                      style: |
                        ha-card {
                          background: {% if states('input_text.slot_b7_data') in ['', 'Empty', 'unknown', 'unavailable'] %}rgba(50, 50, 50, 0.4){% else %}rgba(46, 204, 113, 0.2){% endif %} !important;
                          border-radius: 12px !important;
                        }
                  - type: custom:mushroom-template-card
                    entity: input_text.slot_b8_data
                    primary: B8
                    icon: "{% if states('input_text.slot_b8_data') in ['', 'Empty', 'unknown', 'unavailable'] %}mdi:tray{% else %}mdi:sprout{% endif %}"
                    icon_color: "{% if states('input_text.slot_b8_data') in ['', 'Empty', 'unknown', 'unavailable'] %}grey{% else %}green{% endif %}"
                    tap_action:
                      action: more-info
                    card_mod:
                      style: |
                        ha-card {
                          background: {% if states('input_text.slot_b8_data') in ['', 'Empty', 'unknown', 'unavailable'] %}rgba(50, 50, 50, 0.4){% else %}rgba(46, 204, 113, 0.2){% endif %} !important;
                          border-radius: 12px !important;
                        }
